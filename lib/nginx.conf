server {       
    listen 80;
    listen [::]:80;

    listen 443 ssl;
    listen [::]:443 ssl;

    # settings for SSL

    keepalive_timeout 60;

    ssl_session_cache   shared:SSL:30m;
    ssl_session_timeout 20m;
    ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv3:+EXP:!kEDH;
    #ssl_ciphers RC4:HIGH:!aNULL:!MD5:!kEDH;
    ssl_prefer_server_ciphers on;
    ssl_protocols SSLv3 TLSv1;

    ssl_certificate_key /etc/ssl/certs/bionicspirit.com.key;
    ssl_certificate /etc/ssl/private/bionicspirit.com-bundle.pem;

    # settings for GZIP
    
    gzip_static on;
    gzip_http_version   1.1;
    gzip_disable        "MSIE [1-6]\.";
    gzip_vary           on;
    gzip_proxied any;

    server_name www.bionicspirit.com;
    charset utf-8;

    location / {
        root   /var/www/bionicspirit.com;
        index  index.html index.htm;
        log_not_found off;

        rewrite  ^/rss/?$  https://feeds.feedburner.com/bionicspirit redirect;
        rewrite ^/docs/dialer.html$ /blog/2009/02/20/tips-for-creating-voip-dialer.html permanent;

        expires 24h;
    }

    location /assets/ {
        root /var/www/bionicspirit.com;
        expires max;
        log_not_found off;
    }

    error_page  404  /pages/404.html;
}

server {
    listen 80 default_server;
    listen [::]:80 default_server;

    server_name  alexn.org *.alexn.org bionicspirit.com *.bionicspirit.com;

    location / {
        rewrite  ^/(.*)$  https://www.bionicspirit.com/$1  permanent;
    }
}